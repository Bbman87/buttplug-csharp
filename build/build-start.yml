steps:
  - task: Bash@3
    displayName: "Remove prerelease tag from repo"
    continueOnError: true
    inputs:
      targetType: inline
      script: |
        git tag -d 420.69.666
  - task: Bash@3
    displayName: "Set Up Build Variables"
    inputs:
      targetType: inline
      script: |
        gitshorthash=$(git describe --long --always --dirty)
        echo "Git Short Hash: $gitshorthash"
        echo "##vso[task.setvariable variable=gitShortHash]$gitshorthash"
        echo "##vso[task.setvariable variable=cliBuildName]buttplug-csharp-${{ parameters.platform }}-cli-$(buildConfiguration)-$gitshorthash"
  - task: NuGetToolInstaller@0
    displayName: "Install Platform Dependencies"
  - task: NuGetCommand@2
    displayName: "Restore Project"
    inputs:
      restoreSolution: '$(solution)'
